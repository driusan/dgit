language: go

go:
  - "1.10.x"
  - master

script:
    - echo '##### Verifying formatting'
    - diff -u <(echo -n) <(gofmt -d ./)
    - echo '##### Running tests'
    - go test -v ./...
    - echo '##### Building dgit'`
    - go build
    - echo '##### Running official git basic test suite'
    - git clone https://github.com/git/git.git official-git
    - cd official-git
    - git checkout v2.8.0
    - make
    - cp ../dgit git
    - cp ../git-init git-init
    - chmod a+x git-init
    - cd t
    - make t0000-basic.sh

